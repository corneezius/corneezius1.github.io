var app=angular.module("app",["firebase"]);app.constant("FBURL","https://crowdfluttr.firebaseio.com/"),app.service("Ref",["FBURL",Firebase]),app.factory("Auth",["$firebaseAuth","Ref",function(e,a){return e(a)}]),app.factory("Ideas",["$firebase","Ref",function(e,a){var r=a.child("ideas");return e(r).$asArray()}]),app.factory("Users",["$firebase","Ref",function(e,a){var r=a.child("users");return e(r).$asArray()}]),app.factory("cfFloat",["$firebase","Ref",function(e,a){var r=a.child("float");return e(r).$asArray()}]),app.factory("Messages",["$firebase","Ref",function(e,a){var r=a.child("messages");return e(r).$asArray()}]),app.controller("ctrl",["$scope","Ideas","Users","Auth","Messages","cfFloat",function(e,a,r,o,s,t){function i(){e.idea=""}e.users=r,e.ideas=a,e.auth=o,e.messages=s,e.cfFloat=t,e.idea="",e.FacebookLogin=function(){e.auth.$authWithOAuthPopup("facebook")(),e.username=e.auth.facebook.displayName},e.shareIdea=function(){var a=$("input").val().split(",");jQuery.each(a,function(a,r){e.ideaID="-JcXFk3iWiDxisvWllLx";var o=new Firebase("https://crowdfluttr.firebaseio.com/ideas/"+e.ideaID);o.on("value",function(e){console.log(e.val())},function(e){console.log("The read failed: "+e.code)}),e.val=r,e.cfFloat.$add({ideaID:e.ideaID,recipientEmail:e.val,senderName:e.user.facebook.displayName,senderID:e.user.facebook.id}).then(function(){var e=$("form").serialize();console.log(e),console.log("Idea added: "+r)})})},e.DeleteIdea=function(a){e.ideas.$remove(a)}}]),app.run(["$rootScope","Auth",function(e,a){e.user=a.$getAuth()}]);