<!DOCTYPE html>
<html ng-app="app">
  <head>
     <title>CrowdFluttr</title>
        <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <script src="https://code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet" type="text/css">
        <link href="css/sb-admin-2.css" rel="stylesheet">

         <!-- Custom Fonts -->
    <link href="font-awesome-4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <!-- Custom Fonts -->
        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
        <!-- DataTables CSS -->
        <link href="css/dataTables.bootstrap.css" rel="stylesheet">
        <!-- Tags CSS -->
        <link rel="stylesheet" type="text/css" href="http://xoxco.com/projects/code/tagsinput/jquery.tagsinput.css" />
        <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>

        <link href="css/angucomplete.css" rel="stylesheet">
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
        

        <link rel="shortcut icon" href="images/logosm.png">
        <link rel="stylesheet" type="text/css" href="css/navbar.css" />
        
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.2/angular.min.js"></script>
        <script src="https://cdn.firebase.com/js/client/2.0.2/firebase.js"></script>
        <script src="https://cdn.firebase.com/libs/angularfire/0.9.0/angularfire.min.js"></script>
        <script src="https://darylrowland.github.io/angucomplete/js/angular-touch.min.js"></script>
        <link rel="stylesheet" href="css/jquery.datetimepicker.css">
        <script type="text/javascript" src="js/jquery.datetimepicker.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.8/angular-touch.min.js"></script>
        <script src="app.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
        <script src="js/angucomplete-dir.js"></script>
        <script src="js/angucomplete-ctrl.js"></script>

        <link rel="stylesheet" href="css/colorbox.css" />
        <script src="js/colorbox.js"></script>
        <script>
          $(document).ready(function(){
            $(".iframe").colorbox({iframe:true, width:"80%", height:"80%"});
            if(!auth) {
              window.location.href="/";
            };
          });

          </script>
  </head>
  <body ng-controller="ctrl">
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-521ec0330762c358" async="async"></script>
    <nav ng-include="'navbar.html'"  class="navbar navbar-default navbar-fixed-top" role="navigation">
    </nav>

    <!-- Fluttr feedback form -->
    <div ng-include=" 'feedback.html' "></div>

    <div class="navbar-default sidebar" role="navigation">
      <div class="row">
        <div class="col-lg-12">
          <div id='ideaContent' style="margin-top:50px;margin-left:20px;background-image: url('{{ideaPic}}')">
         
            </div>
            <ul>
              <li>Proposed: {{createTime | date:'EEEE, MMMM d, y h:mm:ss a ' }} </li>
              <li>Category: {{ideaCategory}}</li>
              <li>Creator: {{ideaAuthor}}</li>
              <li>{{ideaLikes}} Upvotes / {{ideaDislikes}} Downvotes</li>
              <li>11 Collaborators</li>
              <li>300 Views</li>
              <li>4 Updates</li>
              <li><a href="#" ng-click="DeleteIdea(ideaID)">Delete this Idea</a>
            </ul>
        </div>
      </div>
      <!-- /.panel-body -->
    </div>               
<!-- Page Content -->
<div id="page-wrapper" style="padding-bottom:50px;">
  <div class="container-fluid">
    <div class="row">
        <div class="col-lg-10">
          <div class="idea-info" style="margin-top:100px;">
            <h2>{{ideaTitle}}</h2>
            <small>By: {{ideaAuthor}}</small>
            <p>{{ideaDesc}}</p>
            <p><div class="addthis_sharing_toolbox"></div></p>
          </div>
          <ul class="nav nav-tabs" role="tablist" id="myTab">
            <li role="presentation" class="active "><a href="#Activity" role="tab" data-toggle="tab">Activity</a></li>
            <li role="presentation"><a href="#Proposals" role="tab" data-toggle="tab">Proposals<span class="badge">4</span></a></li>
            <li role="presentation"><a href="#Work" role="tab" data-toggle="tab">Work Products<span class="badge">2</span></a></li>
            <li role="presentation"><a href="#Invite" role="tab" data-toggle="tab">Invite</a></li>
          </ul>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade in active" id="Activity">
              <div class="row">
                <div class="col-lg-12">
                  <br><br>
                  <ul class="media-list">
                    <li class="media" ng-repeat="(id,item) in ideas_comments | filter:ideaID | orderBy: item.timestamp"> 
                          <div class="media-left">
                              <div class="avatar-container">
                                  <div class="avatar" style="background-image: url('https://graph.facebook.com/{{item.userID}}/picture?type=normal')"></div>
                              </div>
                          </div>
                      <div class="media-body">
                        <p class="">{{item.ic_body}}</p> <span class="date sub-text"><small>Posted by {{item.userName}} on {{item.timestamp | date:'EEEE, MMMM d, y h:mm:ss a '}} PST</small></span>
                      </div>
                    <hr>
                    </li>
                  </ul>
                  <form class="form-inline" role="form" ng-submit="addCommentonIdea()" style="width:100%">
                      <div class="form-group" style="width:80%">
                          <input class="form-control" type="text" placeholder="Your comments" ng-model="newComment" style="width:100%">
                      </div>
                      <div class="form-group">
                          <button type="submit" class="btn btn-default btn-block">Add Comment</button>
                      </div>
                  </form>
                </div><!-- /.col-lg-12 -->
              </div><!-- /.row -->
            </div>
            <div role="tabpanel" class="tab-pane fade" id="Proposals">
              <table class="table table-hover">
              <thead>
                  <th>Proposal</th>
                  <th>Title</th>
                  <th>Timestamp</th>
                  <th>Author</th>
                  <th>Compare</th>
              </thead>
              <tbody style="font-size:80%">
                  <tr ng-hide="proposals.length | filter:ideaID"><td>There are currently no Proposals. Create the first one!</td></tr>
                  <tr ng-repeat="(id,item) in proposals | filter: ideaID | orderBy: item.timestamp">
                      <td>

                      <a class="iframe" href="proposal.html?pid={{item.$id}}">{{item.$id}}</a>
                      <!--
                       <a href="revisions.html?qid={{ideaID}}&rid={{item.$id}}" //target="_blank">{{item.$id}}</a>
                       -->
                      </td>
                      <td>{{item.ptitle}}</td>
                      <td>{{item.timestamp | date:'EEEE, MMMM d, y h:mm:ss a '}} PST</td>
                      <td>{{item.userName}}</td>
                      <td><input type="checkbox" ng-value="{{item.$id}}"></td>
                  </tr>
                  <tr>
                      <td><button class="btn btn-primary" data-toggle="modal" data-target="#myModal" data-backdrop="static" data-keyboard="false">Submit New Proposal</button></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td><button class="btn btn-primary" ng-click="compareProposals()">Compare</button></td>
                  </tr>
              </tbody>
              </table>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="Work">
        
            </div>
            <div role="tabpanel" class="tab-pane fade" id="Invite" ng-controller="MainController">
            <div class="row">
            <div class="large-padded-row">
                <h3>Example 2 - People</h3>
                <div class="padded-row">
                    <div angucomplete id="ex2" placeholder="Search people" pause="300" selectedobject="selectedPerson" localdata="people" searchfields="firstName,surname" titlefield="firstName,surname" descriptionfield="twitter" imagefield="pic" minlength="1" inputclass="form-control"/>
                </div>
                <div class="" ng-show="selectedPerson">
                    You selected <span class="bold-span">{{selectedPerson.originalObject.firstName}} {{selectedPerson.originalObject.surname}}</span>
                </div>
            </div>
            <br><br>
            <br>
            <p>You can send this idea to your friends by typing in their email addresses, separated by commas. It's simple!</p>
            <div style="display:none" id="float-success" class="alert alert-success alert-dismissible" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <strong>Success!</strong> This idea has been shared with your friends.
          </div>
              <form role="form form-inline" ng-submit="shareIdea()" id="float">
                <div class="form-group">
                  <input class="form-control" ng-model="emails" name="tags_1" id="tags_1" type="text" class="tags" value="" placeholder="Email addresses, separated by commas" /></input>  
                </div>
                <div class="form-group">
                  <button type="submit" tab-index="-1" class="btn btn-primary">Share with Friends</button>       
                    </form>
                  </div>
                </div>
             </div>
  
            </div>
          </div> 
        </div>
      </div>
                    </div>
                    <!-- /.col-lg-12 -->
                </div>
                <!-- /.row -->
            </div>
            <!-- /.container-fluid -->
        </div>
        <!-- /#page-wrapper -->

    </div>
    <!-- /#wrapper -->


<div ng-include=" 'footer.html' "></div>


            <!-- Bootstrap core JavaScript

            <!-- Placed at the end of the document so the pages load faster -->
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
            <script src="js/docs.min.js"></script>
            <script>
            $(function () {
            $('#myTab a:first').tab('show')
            })
            </script>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">New Proposal</h4>
      </div>
      <div class="modal-body">
    <form class="form" role="form" ng-submit="addProposal()">
      <div class="form-group">
      <label for="title">Proposal Title</label>
      <input type="text" class="form-control" id="text" ng-model="ptitle" placeholder="Title">
    </div>
    <div class="form-group">
      <label for="editor">Proposal Body</label>
      <textarea class="form-control" rows="10" style="width:100%" name="editor" id="editor" data-ng-model="value" required><div ng-repeat="(id,item) in revisions | filter: ideaID | orderBy: item.timestamp">{{item.pbody}}</div></textarea>
      <script>
     //   CKEDITOR.replace( 'editor' );
      </script>
    </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Save changes</button>
      </div>
    </div>
    </form>
  </div>
</div>

  <!-- sample modal content -->
  <div id="floatModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">

        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title" id="myModalLabel">Send Idea to a Friend</h4>
        </div>
        <div class="modal-body">
        <p>You can send your idea to a friend by typing in their email address. It's simple!</p>

    <form role="form" ng-submit="shareIdea()" id="float">
      <div class="form-group">
        <input ng-model="emails" id="tags_1" type="text" class="tags" value="" /></input>         
      </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" tab-index="-1" data-dismiss="modal">Close</button>
          <button type="submit" tab-index="-1" class="btn btn-primary">Save changes</button>
        </div>
      </form>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->

<!-- Modal -->
<div class="modal fade" id="prModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">{{item.$id}}</h4>
      </div>
      <div class="modal-body">
      {{item.pbody}}
      </div>
      <div class="modal-footer">
      Submitted by: {{item.userID}} on {{item.timestamp}}. <br>
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
      </div>
    </div>
    </form>
  </div>
</div>


          </body>
        </html>